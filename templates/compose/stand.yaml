version: '3.9'

{% if SERVICES is not defined or SERVICES.replace('"', '').replace("'",'') == '' -%}
{% set SERVICES = [] -%}
{% else -%}
{% set SERVICES = SERVICES.split(' ') -%}
{% endif -%}

{% set s = [] -%}
{% if SERVICES -%}
services:
{% for item in SERVICES -%}
{% include item %}
{% endfor -%}
{% endif %}

networks:
  {{ BRIDGE | default('dev-tools', true) }}:
    name: {{ BRIDGE | default('dev-tools', true) }}
    driver: {{ DRIVER | default('bridge', true) }}
    attachable: true
    ipam:
      driver: default
      config:
        - subnet: {{ SUBNET | default('192.168.100.0/24', true) }}
  
volumes:
  postgres:
